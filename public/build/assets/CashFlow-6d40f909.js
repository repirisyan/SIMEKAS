import{d as $,K as I,T as C,o as r,c as b,w as n,f as v,a as e,b as o,g as d,l as x,p as P,u as t,q as N,s as O,e as u,h as R,F as q,t as c,x as T,y as K,O as G,n as Q}from"./app-c6ff63a7.js";import{_ as W}from"./AppLayout-54861043.js";import{a as S}from"./DialogModal-796d0d82.js";import{_ as F}from"./SecondaryButton-abb87fbd.js";import{_ as j}from"./PrimaryButton-6194fcd6.js";import{_ as X,a as Y}from"./Toaster-d5dffb0c.js";import{_ as M,a as g}from"./TextInput-55f5c2cc.js";import{_ as f}from"./InputLabel-21502b8b.js";import{_ as Z}from"./DangerButton-59696932.js";import{_ as ee}from"./TextArea-fbf12e86.js";import"./_plugin-vue_export-helper-c27b6911.js";const se=e("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"}," Cash Flow ",-1),te={class:"p-12"},ae={class:"card w-auto bg-white dark:bg-gray-800 shadow-xl"},le={class:"card-body"},oe={class:"card-title grid grid-cols-1 sm:grid-cols-2 sm:justify-between"},ne={class:"join w-full sm:justify-end"},re=e("option",{value:"",selected:""},"Semua Jenis",-1),ie=e("option",{value:"1"},"Pemasukan",-1),de=e("option",{value:"2"},"Pengeluaran",-1),ue=[re,ie,de],ce=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})],-1),me={key:0,class:"avatar"},pe={class:"w-24 rounded"},_e=["href"],ge=["src"],fe={key:1},he=["onClick"],ye=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})],-1),ve=[ye],we=["onClick"],ke=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1),be=[ke],xe={class:"grid grid-cols-1 gap-3 px-8"},Ce={class:"col-span-6 sm:col-span-4"},Me={class:"col-span-6 sm:col-span-4"},Ve={class:"mr-2"},$e=e("span",{class:"inline mr-2"},"Pemasukan",-1),Te=["readonly"],Se=e("span",{class:"inline mr-2"},"Pengeluaran",-1),Fe=["readonly"],je={class:"col-span-6 sm:col-span-4"},ze={key:0,class:"col-span-6 sm:col-span-4"},Ue=["readonly"],Be=e("br",null,null,-1),De=["value"],He={key:1,class:"col-span-6 sm:col-span-4"},Le=["readonly"],Ee=e("br",null,null,-1),Je=["value"],Ae={class:"col-span-6 sm:col-span-4"},Ie={key:0,class:"loading loading-spinner loading-xs"},Pe={class:"text-black dark:text-white"},Ne={key:0,class:"loading loading-spinner loading-xs"},ss={__name:"CashFlow",props:{cashflows:Object},setup(z){const h=z,p=$(!1),w=$(!1),k=I();let y=null;const s=C({new_image:null,cashflow_id:null,title:null,type:"1",description:null,image:null,amount:null,new_amount:null}),_=C({search:null,type:""}),i=C({cashflow_id:"",cashflow_title:""}),V=(m,l=null)=>{p.value=!0,y=m,m=="Modal Ubah"&&K.get("cashflow/"+l+"/edit").then(a=>{s.title=a.data.title,s.type=a.data.type,s.description=a.data.description,s.image=a.data.image,s.amount=a.data.amount,s.new_amount=a.data.amount,s.cashflow_id=l}).catch(a=>{k.props.flash.message=a})},U=()=>{p.value=!1,s.reset(),s.clearErrors()},B=()=>{y=="Modal Tambah"?s.post(route("cashflow.store"),{preserveScroll:!0,onSuccess:()=>{p.value=!1,s.reset(),s.clearErrors(),setTimeout(()=>{k.props.flash.message=null},2e3)}}):s.post(route("cashflow.update"),{preserveScroll:!0,onStart:()=>{},onSuccess:()=>{p.value=!1,s.reset(),s.clearErrors(),setTimeout(()=>{k.props.flash.message=null},2e3)}})},D=(m,l)=>{w.value=!0,i.cashflow_id=m,i.cashflow_title=l},H=()=>{w.value=!1,i.reset(),i.clearErrors()},L=()=>{i.delete(route("cashflow.destroy",i.cashflow_id),{preserveScroll:!0,onSuccess:()=>{i.reset(),i.clearErrors(),setTimeout(()=>{k.props.flash.message=null},2e3)}})},E=()=>{G.visit("cashflow",{data:{search:_.search,type:_.type},replace:!0,preserveState:!0})};let J=Object.keys(h.cashflows.data).length==0;return(m,l)=>(r(),b(W,{title:"Cash Flow"},{header:n(()=>[se]),default:n(()=>[m.$page.props.flash.message!=null?(r(),b(X,{key:0,response:m.$page.props.flash.message},null,8,["response"])):v("",!0),e("div",te,[e("div",ae,[e("div",le,[e("div",oe,[o(j,{class:"mr-2",onClick:l[0]||(l[0]=a=>V("Modal Tambah"))},{default:n(()=>[d("Tambah + ")]),_:1}),e("div",ne,[e("div",null,[e("div",null,[x(e("input",{"onUpdate:modelValue":l[1]||(l[1]=a=>t(_).search=a),class:"input input-bordered join-item w-auto",placeholder:"Cari Judul"},null,512),[[P,t(_).search,void 0,{lazy:!0}]])])]),x(e("select",{"onUpdate:modelValue":l[2]||(l[2]=a=>t(_).type=a),class:"select select-bordered join-item w-auto sm:w-32"},ue,512),[[N,t(_).type,void 0,{lazy:!0}]]),e("div",{class:"indicator w-auto"},[e("button",{onClick:E,class:"btn join-item"},[d(" Cari "),ce])])])]),o(Y,{theads:["User","Judul","Tanggal","Jenis","Deskripsi","Thumbnail","Jumlah","Aksi"],current_page:h.cashflows.current_page,next_page:h.cashflows.next_page_url,prev_page:m.route("cashflow.index")+"?page="+(h.cashflows.current_page-1)},O({_:2},[t(J)==!1?{name:"content",fn:n(()=>[(r(!0),u(q,null,R(h.cashflows.data,a=>(r(),u("tr",{key:a.id,class:"hover"},[e("td",null,c(a.user.name),1),e("td",null,c(a.title),1),e("td",null,c(new Date(a.created_at).toLocaleDateString("id-ID")),1),e("td",null,[e("div",{class:Q(["badge",a.type=="1"?"badge-success":"badge-error"])},c(a.type=="1"?"Pemasukan":"Pengeluaran"),3)]),e("td",null,c(a.description),1),e("td",null,[a.image!=null?(r(),u("div",me,[e("div",pe,[e("a",{href:"/storage/cashflow/original/"+a.image,target:"_blank"},[e("img",{src:"/storage/cashflow/thumbnail/"+a.image},null,8,ge)],8,_e)])])):(r(),u("span",fe," Tidak ada data "))]),e("td",null,c(new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(a.amount)),1),e("td",null,[e("button",{class:"mr-3 text-warning",onClick:A=>V("Modal Ubah",a.id)},ve,8,he),e("button",{class:"text-error",onClick:A=>D(a.id,a.title)},be,8,we)])]))),128))]),key:"0"}:{name:"empty",fn:n(()=>[e("tr",{class:"text-center"},[e("td",{colspan:"8"},"Tidak ada data")])]),key:"1"}]),1032,["current_page","next_page","prev_page"])])])]),o(S,{show:p.value,onClose:l[11]||(l[11]=a=>p.value=!1)},{title:n(()=>[d(c(t(y)),1)]),content:n(()=>[e("div",xe,[e("div",Ce,[o(f,{for:"title",value:"Title"}),o(M,{id:"title",modelValue:t(s).title,"onUpdate:modelValue":l[3]||(l[3]=a=>t(s).title=a),modelModifiers:{lazy:!0},type:"text",class:"mt-1 block w-full",autocomplete:"title",readonly:t(s).processing},null,8,["modelValue","readonly"]),o(g,{class:"mt-2",message:t(s).errors.title},null,8,["message"])]),e("div",Me,[o(f,{for:"type",value:"Jenis",class:"mb-2"}),e("label",Ve,[$e,x(e("input",{type:"radio",name:"radio-10",checked:"",value:"'1'","onUpdate:modelValue":l[4]||(l[4]=a=>t(s).type=a),readonly:t(s).processing},null,8,Te),[[T,t(s).type,void 0,{lazy:!0}]])]),e("label",null,[Se,x(e("input",{type:"radio",name:"radio-10",value:"'2'","onUpdate:modelValue":l[5]||(l[5]=a=>t(s).type=a),readonly:t(s).processing},null,8,Fe),[[T,t(s).type,void 0,{lazy:!0}]])]),o(g,{class:"mt-2",message:t(s).errors.type},null,8,["message"])]),e("div",je,[o(f,{for:"description",value:"Deskripsi"}),o(ee,{id:"description",modelValue:t(s).description,"onUpdate:modelValue":l[6]||(l[6]=a=>t(s).description=a),modelModifiers:{lazy:!0},class:"mt-1 block w-full",readonly:t(s).processing},null,8,["modelValue","readonly"]),o(g,{class:"mt-2",message:t(s).errors.description},null,8,["message"])]),t(y)=="Modal Tambah"?(r(),u("div",ze,[o(f,{for:"image",value:"Foto"}),e("input",{type:"file",class:"file-input file-input-bordered file-input-sm w-full max-w-xs",onInput:l[7]||(l[7]=a=>t(s).image=a.target.files[0]),readonly:t(s).processing},null,40,Ue),Be,t(s).progress?(r(),u("progress",{key:0,class:"progress progress-success w-56",value:t(s).progress.percentage,max:"100"},c(t(s).progress.percentage)+"% ",9,De)):v("",!0),o(g,{class:"mt-2",message:t(s).errors.image},null,8,["message"])])):(r(),u("div",He,[o(f,{for:"new_image",value:"Foto Baru"}),e("input",{type:"file",class:"file-input file-input-bordered file-input-sm w-full max-w-xs",onInput:l[8]||(l[8]=a=>t(s).new_image=a.target.files[0]),readonly:t(s).processing},null,40,Le),Ee,t(s).progress?(r(),u("progress",{key:0,class:"progress progress-success w-56",value:t(s).progress.percentage,max:"100"},c(t(s).progress.percentage)+"% ",9,Je)):v("",!0),o(g,{class:"mt-2",message:t(s).errors.new_image},null,8,["message"])])),e("div",Ae,[o(f,{for:"amount",value:"Jumlah"}),t(y)=="Modal Tambah"?(r(),b(M,{key:0,id:"amount",modelValue:t(s).amount,"onUpdate:modelValue":l[9]||(l[9]=a=>t(s).amount=a),modelModifiers:{lazy:!0},type:"number",min:"0",class:"mt-1 block w-full",autocomplete:"amount",readonly:t(s).processing},null,8,["modelValue","readonly"])):(r(),b(M,{key:1,id:"amount",modelValue:t(s).new_amount,"onUpdate:modelValue":l[10]||(l[10]=a=>t(s).new_amount=a),modelModifiers:{lazy:!0},type:"number",min:"0",class:"mt-1 block w-full",autocomplete:"amount",readonly:t(s).processing},null,8,["modelValue","readonly"])),o(g,{class:"mt-2",message:t(s).errors.amount},null,8,["message"])])])]),footer:n(()=>[o(j,{disabled:t(s).processing,onClick:B,class:"mr-2 btn-primary"},{default:n(()=>[t(s).processing?(r(),u("span",Ie)):v("",!0),d(" Simpan")]),_:1},8,["disabled"]),o(F,{type:"button",disabled:t(s).processing,onClick:U},{default:n(()=>[d(" Tutup ")]),_:1},8,["disabled"])]),_:1},8,["show"]),o(S,{show:w.value,onClose:l[12]||(l[12]=a=>w.value=!1)},{title:n(()=>[d(" Modal Hapus ")]),content:n(()=>[e("p",Pe,[d(" Apa ada yakin ingin menghapus data "),e("b",null,c(t(i).cashflow_title),1),d(" ? ")])]),footer:n(()=>[o(Z,{disabled:t(i).processing,onClick:L,class:"mr-2"},{default:n(()=>[t(i).processing?(r(),u("span",Ne)):v("",!0),d(" Hapus")]),_:1},8,["disabled"]),o(F,{disabled:t(i).processing,type:"button",onClick:H},{default:n(()=>[d(" Batal ")]),_:1},8,["disabled"])]),_:1},8,["show"])]),_:1}))}};export{ss as default};
