import{d as $,K as A,k as N,T as C,o as n,c as k,w as r,f as y,a as t,b as l,g as d,l as x,p as P,u as s,q as O,e as u,h as R,F as q,t as c,s as T,x as K,O as G,n as Q}from"./app-49957680.js";import{_ as W}from"./AppLayout-7496f776.js";import{a as F}from"./DialogModal-bf047eeb.js";import{_ as S}from"./SecondaryButton-17a6c9ec.js";import{_ as z}from"./PrimaryButton-d9257a38.js";import{_ as X,a as Y}from"./Toaster-5c2c4230.js";import{_ as M,a as f}from"./TextInput-e0737ddc.js";import{_ as h}from"./InputLabel-f9e5cd28.js";import{_ as Z}from"./DangerButton-4f23bead.js";import{_ as ee}from"./TextArea-9cd46420.js";import"./_plugin-vue_export-helper-c27b6911.js";const se=t("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"}," Cash Flow ",-1),te={class:"p-12"},ae={class:"card w-auto bg-white dark:bg-gray-800 shadow-xl"},oe={class:"card-body"},le={class:"card-title flex overflow-x-auto"},ne={class:"join w-full sm:justify-end text-white"},re=t("option",{value:"",selected:""},"Semua Jenis",-1),ie=t("option",{value:"1"},"Pemasukan",-1),de=t("option",{value:"2"},"Pengeluaran",-1),ue=[re,ie,de],ce=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})],-1),me={key:0,class:"avatar"},pe={class:"w-24 rounded"},_e=["href"],ge=["src"],fe={key:1},he=["onClick"],ve=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})],-1),we=[ve],ye=["onClick"],be=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1),ke=[be],xe={class:"grid grid-cols-1 gap-3 px-8"},Ce={class:"col-span-6 sm:col-span-4"},Me={class:"col-span-6 sm:col-span-4"},Ve={class:"mr-2"},$e=t("span",{class:"inline mr-2"},"Pemasukan",-1),Te=["readonly"],Fe=t("span",{class:"inline mr-2"},"Pengeluaran",-1),Se=["readonly"],ze={class:"col-span-6 sm:col-span-4"},Ue={key:0,class:"col-span-6 sm:col-span-4"},je=["readonly"],Be=t("br",null,null,-1),De=["value"],He={key:1,class:"col-span-6 sm:col-span-4"},Le=["readonly"],Ee=t("br",null,null,-1),Ie=["value"],Je={class:"col-span-6 sm:col-span-4"},Ae={key:0,class:"loading loading-spinner loading-xs"},Ne={class:"text-black dark:text-white"},Pe={key:0,class:"loading loading-spinner loading-xs"},ss={__name:"CashFlow",props:{cashflows:Object},setup(U){const v=U,p=$(!1),w=$(!1),b=A(),j=N(()=>Object.keys(v.cashflows.data).length==0);let _=null;const e=C({new_image:null,cashflow_id:null,title:null,type:"1",description:null,image:null,amount:null,new_amount:null}),g=C({search:null,type:""}),i=C({cashflow_id:"",cashflow_title:""}),V=(m,o=null)=>{p.value=!0,_=m,m=="Modal Ubah"&&K.get("cashflow/"+o+"/edit").then(a=>{e.title=a.data.title,e.type=a.data.type,e.description=a.data.description,e.image=a.data.image,e.amount=a.data.amount,e.new_amount=a.data.amount,e.cashflow_id=o}).catch(a=>{b.props.flash.message=a})},B=()=>{p.value=!1,e.reset(),e.clearErrors()},D=()=>{_=="Modal Tambah"?e.post(route("cashflow.store"),{preserveScroll:!0,onSuccess:()=>{p.value=!1,e.reset(),e.clearErrors(),setTimeout(()=>{b.props.flash.message=null},2e3)}}):e.post(route("cashflow.update"),{preserveScroll:!0,onStart:()=>{},onSuccess:()=>{p.value=!1,e.reset(),e.clearErrors(),setTimeout(()=>{b.props.flash.message=null},2e3)}})},H=(m,o)=>{w.value=!0,i.cashflow_id=m,i.cashflow_title=o},L=()=>{w.value=!1,i.reset(),i.clearErrors()},E=()=>{i.delete(route("cashflow.destroy",i.cashflow_id),{preserveScroll:!0,onSuccess:()=>{w.value=!1,i.reset(),i.clearErrors(),setTimeout(()=>{b.props.flash.message=null},2e3)}})},I=()=>{G.visit("cashflow",{data:{search:g.search,type:g.type},replace:!0,preserveState:!0})};return(m,o)=>(n(),k(W,{title:"Cash Flow"},{header:r(()=>[se]),default:r(()=>[m.$page.props.flash.message!=null?(n(),k(X,{key:0,response:m.$page.props.flash.message},null,8,["response"])):y("",!0),t("div",te,[t("div",ae,[t("div",oe,[t("div",le,[l(z,{class:"mr-2",onClick:o[0]||(o[0]=a=>V("Modal Tambah"))},{default:r(()=>[d("TambahÂ + ")]),_:1}),t("div",ne,[x(t("input",{"onUpdate:modelValue":o[1]||(o[1]=a=>s(g).search=a),class:"input input-bordered join-item w-auto",placeholder:"Cari Judul"},null,512),[[P,s(g).search,void 0,{lazy:!0}]]),x(t("select",{"onUpdate:modelValue":o[2]||(o[2]=a=>s(g).type=a),class:"select select-bordered join-item w-auto sm:w-32"},ue,512),[[O,s(g).type,void 0,{lazy:!0}]]),t("div",{class:"indicator w-auto"},[t("button",{onClick:I,class:"btn join-item"},[d(" Cari "),ce])])])]),l(Y,{theads:["User","Judul","Tanggal","Jenis","Deskripsi","Thumbnail","Jumlah","Aksi"],empty:j.value,current_page:v.cashflows.current_page,next_page:v.cashflows.next_page_url,prev_page:m.route("cashflow.index")+"?page="+(v.cashflows.current_page-1)},{content:r(()=>[(n(!0),u(q,null,R(v.cashflows.data,a=>(n(),u("tr",{key:a.id,class:"hover hover:text-white"},[t("td",null,c(a.user.name),1),t("td",null,c(a.title),1),t("td",null,c(new Date(a.created_at).toLocaleDateString("id-ID")),1),t("td",null,[t("div",{class:Q(["badge",a.type=="1"?"badge-success":"badge-error"])},c(a.type=="1"?"Pemasukan":"Pengeluaran"),3)]),t("td",null,c(a.description),1),t("td",null,[a.image!=null?(n(),u("div",me,[t("div",pe,[t("a",{href:"/storage/cashflow/original/"+a.image,target:"_blank"},[t("img",{src:"/storage/cashflow/thumbnail/"+a.image},null,8,ge)],8,_e)])])):(n(),u("span",fe," Tidak ada data "))]),t("td",null,"Rp. "+c(new Intl.NumberFormat("id-ID").format(a.amount)),1),t("td",null,[t("button",{class:"mr-3 text-warning",onClick:J=>V("Modal Ubah",a.id)},we,8,he),t("button",{class:"text-error",onClick:J=>H(a.id,a.title)},ke,8,ye)])]))),128))]),_:1},8,["empty","current_page","next_page","prev_page"])])])]),l(F,{show:p.value,onClose:o[11]||(o[11]=a=>p.value=!1)},{title:r(()=>[d(c(s(_)),1)]),content:r(()=>[t("div",xe,[t("div",Ce,[l(h,{for:"title",value:"Title"}),l(M,{id:"title",modelValue:s(e).title,"onUpdate:modelValue":o[3]||(o[3]=a=>s(e).title=a),modelModifiers:{lazy:!0},type:"text",class:"mt-1 block w-full",autocomplete:"title",readonly:s(e).processing},null,8,["modelValue","readonly"]),l(f,{class:"mt-2",message:s(e).errors.title},null,8,["message"])]),t("div",Me,[l(h,{for:"type",value:"Jenis",class:"mb-2"}),t("label",Ve,[$e,x(t("input",{type:"radio",name:"radio-10",checked:"",value:"1","onUpdate:modelValue":o[4]||(o[4]=a=>s(e).type=a),readonly:s(e).processing},null,8,Te),[[T,s(e).type,void 0,{lazy:!0}]])]),t("label",null,[Fe,x(t("input",{type:"radio",name:"radio-10",value:"2","onUpdate:modelValue":o[5]||(o[5]=a=>s(e).type=a),readonly:s(e).processing},null,8,Se),[[T,s(e).type,void 0,{lazy:!0}]])]),l(f,{class:"mt-2",message:s(e).errors.type},null,8,["message"])]),t("div",ze,[l(h,{for:"description",value:"Deskripsi"}),l(ee,{id:"description",modelValue:s(e).description,"onUpdate:modelValue":o[6]||(o[6]=a=>s(e).description=a),modelModifiers:{lazy:!0},class:"mt-1 block w-full",readonly:s(e).processing},null,8,["modelValue","readonly"]),l(f,{class:"mt-2",message:s(e).errors.description},null,8,["message"])]),s(_)=="Modal Tambah"?(n(),u("div",Ue,[l(h,{for:"image",value:"Foto"}),t("input",{type:"file",class:"file-input file-input-bordered file-input-sm w-full max-w-xs",onInput:o[7]||(o[7]=a=>s(e).image=a.target.files[0]),readonly:s(e).processing},null,40,je),Be,s(e).progress?(n(),u("progress",{key:0,class:"progress progress-success w-56",value:s(e).progress.percentage,max:"100"},c(s(e).progress.percentage)+"% ",9,De)):y("",!0),l(f,{class:"mt-2",message:s(e).errors.image},null,8,["message"])])):(n(),u("div",He,[l(h,{for:"new_image",value:"Foto Baru"}),t("input",{type:"file",class:"file-input file-input-bordered file-input-sm w-full max-w-xs",onInput:o[8]||(o[8]=a=>s(e).new_image=a.target.files[0]),readonly:s(e).processing},null,40,Le),Ee,s(e).progress?(n(),u("progress",{key:0,class:"progress progress-success w-56",value:s(e).progress.percentage,max:"100"},c(s(e).progress.percentage)+"% ",9,Ie)):y("",!0),l(f,{class:"mt-2",message:s(e).errors.new_image},null,8,["message"])])),t("div",Je,[l(h,{for:"amount",value:"Jumlah (Rp."+new Intl.NumberFormat("id-ID").format(s(_)=="Modal Tambah"?s(e).amount:s(e).new_amount)+")"},null,8,["value"]),s(_)=="Modal Tambah"?(n(),k(M,{key:0,id:"amount",modelValue:s(e).amount,"onUpdate:modelValue":o[9]||(o[9]=a=>s(e).amount=a),modelModifiers:{lazy:!0},type:"number",min:"0",class:"mt-1 block w-full",autocomplete:"amount",readonly:s(e).processing},null,8,["modelValue","readonly"])):(n(),k(M,{key:1,id:"amount",modelValue:s(e).new_amount,"onUpdate:modelValue":o[10]||(o[10]=a=>s(e).new_amount=a),modelModifiers:{lazy:!0},type:"number",min:"0",class:"mt-1 block w-full",autocomplete:"amount",readonly:s(e).processing},null,8,["modelValue","readonly"])),l(f,{class:"mt-2",message:s(e).errors.amount},null,8,["message"])])])]),footer:r(()=>[l(z,{disabled:s(e).processing,onClick:D,class:"mr-2 btn-primary"},{default:r(()=>[s(e).processing?(n(),u("span",Ae)):y("",!0),d(" Simpan")]),_:1},8,["disabled"]),l(S,{type:"button",disabled:s(e).processing,onClick:B},{default:r(()=>[d(" Tutup ")]),_:1},8,["disabled"])]),_:1},8,["show"]),l(F,{show:w.value,onClose:o[12]||(o[12]=a=>w.value=!1)},{title:r(()=>[d(" Modal Hapus ")]),content:r(()=>[t("p",Ne,[d(" Apa ada yakin ingin menghapus data "),t("b",null,c(s(i).cashflow_title),1),d(" ? ")])]),footer:r(()=>[l(Z,{disabled:s(i).processing,onClick:E,class:"mr-2"},{default:r(()=>[s(i).processing?(n(),u("span",Pe)):y("",!0),d(" Hapus")]),_:1},8,["disabled"]),l(S,{disabled:s(i).processing,type:"button",onClick:L},{default:r(()=>[d(" Batal ")]),_:1},8,["disabled"])]),_:1},8,["show"])]),_:1}))}};export{ss as default};
